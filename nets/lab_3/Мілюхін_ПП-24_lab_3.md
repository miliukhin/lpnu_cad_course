---
pdf-engine: xelatex
header-includes:
- \input{$UNI/.templates/settings/preamble.tex}
- \input{$UNI/.templates/settings/minted_settings.tex}
- \newcommand\Type{\Lab}
- \Work{nets}
- \renewcommand\Variant{5}
- \newcommand\Date{11.\the\month.\the\year}
- \newcommand\Number{3}
- \newcommand\Topic{АНАЛІЗ РОБОТИ МЕРЕЖЕВИХ ПРОТОКОЛІВ ARP(RARP), DNS, DHCP}
---

\input{$UNI/.templates/parts/header.tex}
Вивчити принципи роботи та призначення протоколів ARP (RARP), DNS,
DHCP .

## Порядок виконання роботи

1. Ознайомтеся із теоретичними відомостями до роботи.
2. Визначте МAC-адресу Вашого ПК. Для цього виконайте такі пункти:
	a) На робочому столі виберіть кнопку Пуск -> Выполнить.
	b) У вікні, що з'явилось введіть команду cmd і натистність ОК.
	c) Відкриється вікно командної стрічки Windows
	d) В командній стрічці введіть команду ipconfig /all. Запишіть у звіт
	   результати виконання даної команди.
3. В командній стрічці введіть команду arp –a. Запишіть у звіт результати
   виконання даної команди.
4. Налаштуйте динамічне присвоєння IP-адреси на Вашому ПК. Для цього виберіть
   кнопку Пуск->Подключение->Отобразить все подключения. Клікніть по кнопці
   Подключение по локальной сети правою кнопкою маніпулятора і виберіть пункт
   Свойства.
5. У вікні, що зявилось виберіть Свойства Протокол ТСP/IP. Відкриється вікно
   налаштувань
6. Виберіть “Получить ІР-адрес автоматически”.
7. Перевірте адресу Вашого комп’ютера. Для цього виконайте пункт 2.
8. В командній стрічці введіть команду ipconfig /release. Перевірте адресу
   Вашого комп’ютера.
9. В командній стрічці введіть команду ipconfig /renew. Перевірте адресу Вашого
   комп’ютера.
10. У вікні командної стрічки Windows виконайте команду ping ww.cisco.com.
11. Запишіть IP –адресу, що відображається у звіт.
12. В командній стрічці введіть команду nslookup. Який DNS-сервер
    використовується за замовчуванням?
13. В командній стрічці введіть команду ?, шоб побачити перелік всіх доступних
    команд в режимі NSLOOKUP.
14. В командній стрічці введіть команду set type=mx, щоб мати змогу визначити
    поштові сервери.
15. В командній стрічці введіть команду www.cisco.com. Які у даного сервера
    основне ім'я, поштова адреса та час життя (TTL) за замовчуванням?
16. У командному рядку ведіть команду exit, щоб повернутися до звичайного
    командного рядка.
17. Тут же введіть команду ipconfig /all. Запишіть IP-адреси всіх DNS-серверів,
    що використовуються в локальній мережі.
18. У командному рядку ведіть команду exit, щоб вийти із командного рядка та
    завершити виконання роботи.

Я працюю на Linux, тому дії під час виконання завдань відрізняються.

### 2. Визначення MAC-адреси

```sh
[sasha@amnesia ~]$ ip link
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000
    link/loopback xx:xx:xx:xx:xx:xx brd xx:xx:xx:xx:xx:xx
2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
    link/ether xx:xx:xx:xx:xx:xx brd xx:xx:xx:xx:xx:xx
3: wlan0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP mode DORMANT group default qlen 1000
    link/ether xx:xx:xx:xx:xx:xx brd xx:xx:xx:xx:xx:xx
4: virbr0: <NO-CARRIER,BROADCAST,MULTICAST,UP> mtu 1500 qdisc noqueue state DOWN mode DEFAULT group default qlen 1000
    link/ether xx:xx:xx:xx:xx:xx brd xx:xx:xx:xx:xx:xx
5: docker0: <NO-CARRIER,BROADCAST,MULTICAST,UP> mtu 1500 qdisc noqueue state DOWN mode DEFAULT group default
    link/ether xx:xx:xx:xx:xx:xx brd xx:xx:xx:xx:xx:xx
```

### 3. Вивід ARP таблиці

```sh
[sasha@amnesia ~]$ ip neigh
192.168.1.1 dev eth0 lladdr xx:xx:xx:xx:xx:xx STALE
192.168.161.66 dev wlan0 lladdr xx:xx:xx:xx:xx:xx REACHABLE
```

### 4-9. Налаштування динамічного присвоєння IP-адреси

Сервер DHCP відмовився надавати мені іншу адресу.

```sh
[sasha@amnesia ~]$ ip a
3: wlan0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP group default
...
    inet 192.168.132.108/24 brd 192.168.132.255 scope global dynamic noprefixroute wlan0
       valid_lft 2047sec preferred_lft 2047sec
...
```

```sh
[main]
dhcp=dhclient
```

v /etc/NetworkManager/conf.d/dhcp-client.conf
```sh
sudo dhclient -r wlan0
sv restart NetworkManager
```

```sh
3: wlan0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP group default
...
    inet 192.168.132.109/24 brd 192.168.132.255 scope global dynamic noprefixroute wlan0
...
```

Думаю, це спрацювало тільки тому, що я поміняв клієнт DHCP, а не тому що
сервер передумав.

### 10. Перевірка доступності сайту

```sh
[sasha@amnesia ~]$ ping www.cisco.com

PING e2867.dsca.akamaiedge.net (104.91.49.38) 56(84) bytes of data.
64 bytes from a104-91-49-38.deploy.static.akamaitechnologies.com (104.91.49.38): icmp_seq=1 ttl=56 time=15.2 ms
64 bytes from a104-91-49-38.deploy.static.akamaitechnologies.com (104.91.49.38): icmp_seq=2 ttl=56 time=15.3 ms
64 bytes from a104-91-49-38.deploy.static.akamaitechnologies.com (104.91.49.38): icmp_seq=3 ttl=56 time=15.3 ms
64 bytes from a104-91-49-38.deploy.static.akamaitechnologies.com (104.91.49.38): icmp_seq=4 ttl=56 time=15.3 ms
^C
--- e2867.dsca.akamaiedge.net ping statistics ---
4 packets transmitted, 4 received, 0% packet loss, time 3006ms
rtt min/avg/max/mdev = 15.206/15.264/15.318/0.039 ms
```

### 12-15. Використання nslookup

```sh
[sasha@amnesia ~]$ nslookup cisco.com
Server:         192.168.161.66
Address:        192.168.161.66#53
Non-authoritative answer:
Name:   cisco.com
Address: 72.163.4.185
Name:   cisco.com
Address: 2001:420:1101:1::185
```

Використовується локальний сервер DNS.

```sh
> ?
The '?' command is not yet implemented.
> set type=mx
> www.cisco.com
Server:         192.168.161.66
Address:        192.168.161.66#53

Non-authoritative answer:
www.cisco.com   canonical name = www.cisco.com.akadns.net.
www.cisco.com.akadns.net        canonical name = wwwds.cisco.com.edgekey.net.
wwwds.cisco.com.edgekey.net     canonical name = wwwds.cisco.com.edgekey.net.globalredir.akadns.net.
wwwds.cisco.com.edgekey.net.globalredir.akadns.net      canonical name = e2867.dsca.akamaiedge.net.

Authoritative answers can be found from:
dsca.akamaiedge.net
        origin = n0dsca.akamaiedge.net
        mail addr = hostmaster.akamai.com
        serial = 1711926872
        refresh = 1000
        retry = 1000
        expire = 1000
        minimum = 1800
```

```sh
[sasha@amnesia ~]$ dog www.cisco.com
CNAME www.cisco.com.                                         3m47s   "www.cisco.com.akadns.net."
CNAME www.cisco.com.akadns.net.                              3m08s   "wwwds.cisco.com.edgekey.net."
CNAME wwwds.cisco.com.edgekey.net.                        1h24m44s   "wwwds.cisco.com.edgekey.net.globalredir.akadns.net."
CNAME wwwds.cisco.com.edgekey.net.globalredir.akadns.net.   19m23s   "e2867.dsca.akamaiedge.net."
    A e2867.dsca.akamaiedge.net.                               15s   2.17.157.14
                                                             ^^^^^
                                                              TTL
```

### 17. Визначення IP-адрес DNS-серверів

```sh
[sasha@amnesia ~]$ cat /etc/resolv.conf
# Generated by NetworkManager
search lan
nameserver 192.168.161.66
nameserver 192.168.1.1
```

### 18. Завершення сесії

```sh
exit
```

# Висновок

Деякі команди пригадав, деякі дізнався, наприклад, для відображення ARP-таблиці. З отриманням нової адреси через DHCP були деякі проблеми.

# Відповіді на контрольні запитання

1) Що таке мережевий протокол та яке його призначення? Це набір правил для обміну даними через мережу. Щоб було зручно стандартно.
2) Що таке фізична адреса? Скільки MAC-адрес може бути в комп’ютера та чому? Може бути кілька MAC-адрес, зазвичай по одній на кожен мережевий інтерфейс. Також можна змінити MAC-адресу.
3) Як ще називають MAC-адресу? Фізична, апаратна.
4) Яке основне призначення протоколів ARP та RARP? Встановлення відповідності між адресами IP та MAC. ARP для визначеня MAC на основі IP, RARP --- навпаки.
5) В чому відмінність механізмів статичного та динамічного присвоєння IP-адрес? Статично вручну, динамічно --- автоматично за допомогою DHCP.
6) Який порт використовує протокол DHCP? UDP 67 сервер, 68 клієнт.
7) Які Вам відомі ієрархії DNS доменів? Кореневий домен, домен верхнього рівня (TLD), домен другого рівня і піддомені. Наприклад, "example.com" - домен другого рівня, "com" - домен верхнього рівня.
8) Для чого використовується команда nslookup? Щоб інтерактивно запитувати сервери імен.
